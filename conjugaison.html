<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercice de Conjugaison - Tous Temps/Modes</title>
    <style>
        body { font-family: Arial, sans-serif; display: flex; flex-direction: column; align-items: center; margin-top: 30px; }
        .container { text-align: center; margin-bottom: 20px; }
        .grid-container { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; width: 80%; margin-top: 20px; }
        .question-box { border: 1px solid #ccc; padding: 10px; text-align: center; border-radius: 8px; background-color: #f9f9f9; }
        input[type="text"] { width: 120px; padding: 5px; text-align: center; }
        button { margin: 10px; padding: 10px 20px; font-size: 16px; cursor: pointer; }
        #result { font-size: 18px; font-weight: bold; }
        .error { background-color: #f8d7da; }
        .correct { background-color: #d4edda; }
        .correction { color: red; font-size: 14px; margin-top: 5px; }
    </style>
</head>
<body>
    <h1>Exercice de Conjugaison</h1>

    <div class="container">
        <label for="group-select">Groupe :</label>
        <select id="group-select">
            <option value="1">1er groupe</option>
            <option value="2">2e groupe</option>
            <option value="3">3e groupe</option>
        </select>
        <label for="mode-select">Mode :</label>
        <select id="mode-select">
            <option value="indicatif">Indicatif</option>
            <option value="subjonctif">Subjonctif</option>
            <option value="conditionnel">Conditionnel</option>
            <option value="impératif">Impératif</option>
        </select>
        <label for="temps-select">Temps :</label>
        <select id="temps-select">
            <option value="présent">Présent</option>
            <option value="imparfait">Imparfait</option>
            <option value="passé_composé">Passé composé</option>
            <option value="plus_que_parfait">Plus-que-parfait</option>
            <option value="futur_simple">Futur simple</option>
            <option value="futur_antérieur">Futur antérieur</option>
        </select>
        <button onclick="generateQuestions()">Générer les questions</button>
    </div>

    <div class="grid-container" id="questionsGrid"></div>
    <button onclick="checkAnswers()">Vérifier les réponses</button>
    <button onclick="generateQuestions()">Réessayer</button>
    <div id="result"></div>

    <script>
        // Structure EXEMPLE (à compléter pour obtenir 30 verbes par groupe/temps/mode)
        // Pour chaque verbe, les conjugaisons sont dans l'ordre : je, tu, il/elle, nous, vous, ils/elles
        const conjugations = {
            "1": { // 1er groupe
                "indicatif": {
                    "présent": {
                        "aimer": ["aime", "aimes", "aime", "aimons", "aimez", "aiment"],
                        "travailler": ["travaille", "travailles", "travaille", "travaillons", "travaillez", "travaillent"],
                        "se laver": ["me lave", "te laves", "se lave", "nous lavons", "vous lavez", "se lavent"],
                        "se coucher": ["me couche", "te couches", "se couche", "nous couchons", "vous couchez", "se couchent"],
                        // ... jusqu'à 30 verbes (dont 10 pronominaux)
                    },
                    "imparfait": {
                        "aimer": ["aimais", "aimais", "aimait", "aimions", "aimiez", "aimaient"],
                        "travailler": ["travaillais", "travaillais", "travaillait", "travaillions", "travailliez", "travaillaient"],
                        "se laver": ["me lavais", "te lavais", "se lavait", "nous lavions", "vous laviez", "se lavaient"],
                        // ...
                    },
                    "passé_composé": {
                        "aimer": ["ai aimé", "as aimé", "a aimé", "avons aimé", "avez aimé", "ont aimé"],
                        "se laver": ["me suis lavé", "t'es lavé", "s'est lavé", "nous sommes lavés", "vous êtes lavés", "se sont lavés"],
                        // ...
                    },
                    "futur_simple": {
                        "aimer": ["aimerai", "aimeras", "aimera", "aimerons", "aimerez", "aimeront"],
                        "se laver": ["me laverai", "te laveras", "se lavera", "nous laverons", "vous laverez", "se laveront"],
                        // ...
                    }
                    // ... autres temps de l'indicatif
                },
                "subjonctif": {
                    "présent": {
                        "aimer": ["aime", "aimes", "aime", "aimions", "aimiez", "aiment"],
                        "se laver": ["me lave", "te laves", "se lave", "nous lavions", "vous laviez", "se lavent"],
                        // ...
                    },
                    "imparfait": {
                        "aimer": ["aimasse", "aimasses", "aimât", "aimassions", "aimassiez", "aimassent"],
                        "se laver": ["me lavasse", "te lavasses", "se lavât", "nous lavassions", "vous lavassiez", "se lavassent"],
                        // ...
                    }
                    // ... autres temps du subjonctif
                },
                "conditionnel": {
                    "présent": {
                        "aimer": ["aimerais", "aimerais", "aimerait", "aimerions", "aimeriez", "aimeraient"],
                        "se laver": ["me laverais", "te laverais", "se laverait", "nous laverions", "vous laveriez", "se laveraient"],
                        // ...
                    },
                    // ... autres temps du conditionnel
                },
                "impératif": {
                    "présent": {
                        // Pour impératif: tu, nous, vous (ordre: tu, nous, vous)
                        "aimer": ["aime", "aimons", "aimez"],
                        "se laver": ["lave-toi", "lavons-nous", "lavez-vous"],
                        // ...
                    }
                }
            },
            // 2e groupe (exemple)
            "2": {
                "indicatif": {
                    "présent": {
                        "finir": ["finis", "finis", "finit", "finissons", "finissez", "finissent"],
                        "se réjouir": ["me réjouis", "te réjouis", "se réjouit", "nous réjouissons", "vous réjouissez", "se réjouissent"],
                        // ...
                    },
                    // ... autres temps/modes
                },
                // subjonctif, conditionnel, impératif à compléter
            },
            // 3e groupe (exemple)
            "3": {
                "indicatif": {
                    "présent": {
                        "prendre": ["prends", "prends", "prend", "prenons", "prenez", "prennent"],
                        "se plaindre": ["me plains", "te plains", "se plaint", "nous plaignons", "vous plaignez", "se plaignent"],
                        // ...
                    },
                    // ... autres temps/modes
                },
                // subjonctif, conditionnel, impératif à compléter
            }
        };

        // Pronoms par défaut, sauf à l'impératif (seulement tu, nous, vous)
        const pronouns = ["je", "tu", "il/elle", "nous", "vous", "ils/elles"];
        const imperatifPronouns = ["tu", "nous", "vous"];

        function generateQuestions() {
            const selectedGroup = document.getElementById("group-select").value;
            const selectedMode = document.getElementById("mode-select").value;
            const selectedTemps = document.getElementById("temps-select").value;
            const gridContainer = document.getElementById("questionsGrid");
            gridContainer.innerHTML = "";

            const verbsObj = conjugations[selectedGroup]?.[selectedMode]?.[selectedTemps];
            if (!verbsObj) {
                gridContainer.innerHTML = "<div>Aucune conjugaison disponible pour ce choix.</div>";
                return;
            }
            const verbList = Object.keys(verbsObj);
            if (verbList.length === 0) {
                gridContainer.innerHTML = "<div>Aucune conjugaison disponible pour ce choix.</div>";
                return;
            }

            let used = new Set();
            // Pour exemples, on limite à 10, mais tu peux mettre 30
            const questionCount = Math.min(10, verbList.length);
            for (let i = 0; i < questionCount; i++) {
                let verb;
                do { verb = verbList[Math.floor(Math.random() * verbList.length)]; }
                while (used.has(verb));
                used.add(verb);

                // Pronoms spéciaux pour impératif
                let pronounsList = (selectedMode === "impératif") ? imperatifPronouns : pronouns;
                const pronounIndex = Math.floor(Math.random() * pronounsList.length);
                const pronoun = pronounsList[pronounIndex];
                const correctAnswer = verbsObj[verb][pronounIndex];

                const questionBox = document.createElement("div");
                questionBox.className = "question-box";
                questionBox.innerHTML = `
                    Conjuguez <b>${verb}</b> (${selectedMode} ${selectedTemps}) avec "<b>${pronoun}</b>" :
                    <input type="text" class="answer" data-correct="${correctAnswer}">
                    <div class="correction" style="display: none;">Correction : ${correctAnswer}</div>
                `;
                gridContainer.appendChild(questionBox);
            }
            document.getElementById("result").innerText = "";
        }

        function checkAnswers() {
            const answers = document.querySelectorAll(".answer");
            let correctCount = 0;
            answers.forEach(input => {
                const correctAnswer = input.dataset.correct;
                const userAnswer = input.value.trim().toLowerCase();
                const correctionDisplay = input.nextElementSibling;

                if (userAnswer === correctAnswer) {
                    correctCount++;
                    input.classList.add("correct");
                    input.classList.remove("error");
                    correctionDisplay.style.display = "none";
                } else {
                    input.classList.add("error");
                    input.classList.remove("correct");
                    correctionDisplay.style.display = "block";
                }
            });
            const totalQuestions = answers.length;
            document.getElementById("result").innerText = `Résultat : ${correctCount} sur ${totalQuestions}`;
        }

        window.onload = generateQuestions;
    </script>
</body>
</html>
